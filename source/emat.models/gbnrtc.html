

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GBNRTC Model &mdash; TMIP-EMAT 0.1.1, February 2019 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/tmip_emat.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Meta-Models" href="../emat.metamodels.html" />
    <link rel="prev" title="Excel-based Models" href="excel.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> TMIP-EMAT
          

          
          </a>

          
            
            
              <div class="version">
                0.1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../emat.intro.html">Introduction to EMAT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../emat.install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../emat.scope/index.html">Exploratory Scoping</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Core Models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="abstract.html">Basic EMAT Model API</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_based.html">Python-Based Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="excel.html">Excel-based Models</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GBNRTC Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#implementation-specific-methods">Implementation-Specific Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../emat.metamodels.html">Meta-Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../emat.database/index.html">Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../emat.examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../emat.glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../emat.references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TMIP-EMAT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Core Models</a> &raquo;</li>
        
      <li>GBNRTC Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/source/emat.models/gbnrtc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>This is <strong>DRAFT</strong> documentation under development.  The interfaces
documented are shown for illustration and are not guaranteed to be stable 
in future releases of TMIP-EMAT.</p>
<p class="last">The views expressed in this draft documentation do not necessarily 
represent the opinions of FHWA, and do not constitute an endorsement, 
recommendation, or specification by FHWA.</p>
</div>
<div class="section" id="gbnrtc-model">
<h1>GBNRTC Model<a class="headerlink" href="#gbnrtc-model" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="emat.model.gbnrtc.GBNRTCModel">
<em class="property">class </em><code class="descclassname">emat.model.gbnrtc.</code><code class="descname">GBNRTCModel</code><span class="sig-paren">(</span><em>configuration: Union[str, Mapping], scope: Union[emat.scope.scope.Scope, str], safe: bool = True, db: emat.database.database.Database = None, name: str = 'GBNRTC'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">emat.model.core_model.AbstractCoreModel</span></code></p>
<p>Setup connections and paths to GBNRTC core model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>configuration</strong> – The configuration for this
core model. This can be passed as a dict, or as a str
which gives the filename of a YAML file that will be
loaded.</li>
<li><strong>scope</strong> – The exploration scope, as a Scope object or as
a str which gives the filename of a YAML file that will be
loaded.</li>
<li><strong>safe</strong> – Load the configuration YAML file in ‘safe’ mode.
This can be disabled if the configuration requires
custom Python types or is otherwise not compatible with
safe mode. Loading configuration files with safe mode
off is not secure and should not be done with files from
untrusted sources.</li>
<li><strong>db</strong> – An optional Database to store experiments and results.</li>
<li><strong>name</strong> – A name for this model, given as an alphanumeric string.
The name is required by ema_workbench operations.
If not given, “GBNRTC” is used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="implementation-specific-methods">
<h2>Implementation-Specific Methods<a class="headerlink" href="#implementation-specific-methods" title="Permalink to this headline">¶</a></h2>
<p>These methods are defined specifically in this GBNRTC-specific class,
in order to interface with the TransCAD model for the GBNRTC region.</p>
<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.setup">
<code class="descclassname">GBNRTCModel.</code><code class="descname">setup</code><span class="sig-paren">(</span><em>xl_di: dict</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the core model with the experiment variable values</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>xl_di</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – experiment variables including both exogenous
uncertainty and policy levers</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#KeyError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> – if experiment variable defined is not supported
by the core model</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.start_transcad">
<code class="descclassname">GBNRTCModel.</code><code class="descname">start_transcad</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.start_transcad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.start_transcad" title="Permalink to this definition">¶</a></dt>
<dd><p>Launch TransCAD and call methods to reset scenario</p>
</dd></dl>

<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.run">
<code class="descclassname">GBNRTCModel.</code><code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Launches TransCAD and runs the model</p>
<p>Model should be prepared using <cite>setup</cite> first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UserWarning</span></code></a> – If model is not properly setup.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.run_model">
<code class="descclassname">GBNRTCModel.</code><code class="descname">run_model</code><span class="sig-paren">(</span><em>scenario</em>, <em>policy</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.run_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.run_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs an experiment through core model.</p>
<p>This method overloads the <cite>run_model</cite> method given in
the EMA Workbench, and provides the correct execution
of the GBNRTC model within that framework.</p>
<p>For each experiment, the core model is called to:</p>
<blockquote>
<div><ol class="arabic simple">
<li>set experiment variables</li>
<li>run the experiment</li>
<li>run post-processors associated with specified
performance measures</li>
<li>(optionally) archive model outputs</li>
<li>record performance measures to database</li>
</ol>
</div></blockquote>
<p>Note that this method does <em>not</em> return any outcomes.
Outcomes are instead written into self.outcomes_output,
and can be retrieved from there.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>scenario</strong> (<em>Scenario</em>) – A dict-like object that
has key-value pairs for each uncertainty.</li>
<li><strong>policy</strong> (<em>Policy</em>) – A dict-like object that
has key-value pairs for each lever.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UserWarning</span></code></a> – If there are no experiments associated with
this type.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.import_meas">
<code class="descclassname">GBNRTCModel.</code><code class="descname">import_meas</code><span class="sig-paren">(</span><em>m_names: List[str], output_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.import_meas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.import_meas" title="Permalink to this definition">¶</a></dt>
<dd><p>Import selected measures into dataframe</p>
<p>Imports measures from active scenario</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>m_names</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – List of measures to be processed</li>
<li><strong>output_path</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Path to model output locations</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dict of measure name and values from active scenario</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#KeyError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> – If post process is not available for specified
measure</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.post_process">
<code class="descclassname">GBNRTCModel.</code><code class="descname">post_process</code><span class="sig-paren">(</span><em>xl_di: dict, m_names: List[str], output_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.post_process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.post_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs post processors associated with measures.</p>
<p>For the GBNRTC model, this method calls
TransCAD macros to generate output files.</p>
<p>The model should have previously been executed using
the <cite>run</cite> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xl_di</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Dictionary of experiment variables - indices
are variable names, values are the experiment settings</li>
<li><strong>m_names</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – List of measures to be processed</li>
<li><strong>output_path</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Path to model outputs - if set to none
will use local values</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#KeyError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> – If post process is not available for specified
measure</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.get_ex_archive_path">
<code class="descclassname">GBNRTCModel.</code><code class="descname">get_ex_archive_path</code><span class="sig-paren">(</span><em>scp_name: str</em>, <em>exp_id: int</em><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.get_ex_archive_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.get_ex_archive_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns path to store model run outputs</p>
<p>Can be useful for long model runs if additional measures will be
defined at a later time (e.g. link volumes).</p>
<p>Both the scope name and experiment id can be used to create the
folder path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>scp_name</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Scope name</li>
<li><strong>exp_id</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – experiment id integer (row id of experiment</li>
<li><strong>database</strong><strong>)</strong> (<em>in</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">model result path (no trailing backslashes)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="emat.model.gbnrtc.GBNRTCModel.archive">
<code class="descclassname">GBNRTCModel.</code><code class="descname">archive</code><span class="sig-paren">(</span><em>xl: dict</em>, <em>mod_results_path: str</em>, <em>experiment_id: int = 0</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emat/model/gbnrtc/gbnrtc_model.html#GBNRTCModel.archive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#emat.model.gbnrtc.GBNRTCModel.archive" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies TransCAD settings, outputs and common input files</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xl</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Dictionary of experiment variables</li>
<li><strong>mod_results_path</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – archive path</li>
<li><strong>experiment_id</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>, </em><em>optional</em>) – The id number for this experiment.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../emat.metamodels.html" class="btn btn-neutral float-right" title="Meta-Models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="excel.html" class="btn btn-neutral" title="Excel-based Models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>